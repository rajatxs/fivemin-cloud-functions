<style>
   .post-content {
      width: 700px;
      margin-left: auto;
      margin-right: auto;
   }
   .post-tag-links {
      display: flex;
      gap: var(--gap-half);
      justify-content: center;
      align-items: stretch;
      flex-wrap: wrap;
   }
   .fm-post__cover_image {
      border-radius: 12px;
      height: 400px;
      background-position: center;
      background-size: cover;
      background-repeat: no-repeat;
      background-image: url('<%= postCoverImageUrl %>');
   }
   .post-body h1,
   .post-body h2,
   .post-body h3,
   .post-body h4,
   .post-body h5,
   .post-body h6 {
      padding: 8px 0;
   }
   .post-body pre {
      line-break: anywhere;
      white-space: break-spaces;
   }

   .fm-post__cover_image, .fm-post__paragraph, .content__image_block {
      position: relative;
   }
   .fm-post__caption, .content__image_caption {
      display: block;
      text-align: center;
      font-size: 90%;
      color: var(--accents-4);
   }
   .fm-post__cover_image_ref, .fm-post__image_ref, .content__image_ref {
      display: inline-flex;
      position: absolute;
      min-width: 60px;
      text-align: center;
      top: var(--gap-half);
      right: var(--gap-half);
      padding: var(--gap-quarter) var(--gap-half);
      background-color: var(--overlay-dark);
      color: var(--light);
      border-radius: 25px;
      opacity: 0.7;
      transition: opacity 120ms ease, background-color 40ms linear;
   }
   .fm-post__cover_image_ref small, .fm-post__image_ref small, .content__image_ref small {
      margin-left: auto;
      margin-right: auto;
   }
   .fm-post__cover_image_ref:hover, .fm-post__image_ref:hover, .content__image_ref:hover {
      background-color: var(--light-fr);
      opacity: 1;
   }
   .fm-post__cover_image_ref:focus, .fm-post__image_ref:focus, .content__image_ref:focus {
      background-color: var(--light-fr);
   }

   .content__image_block {
      margin: 1rem 0;
      line-height: 1.825em;
   }
   .content__image_caption {
      margin-top: 4px;
   }

   .content__code_block {
      padding: var(--gap-half) var(--gap);
      background-color: var(--accents-2);
      border-radius: var(--radius);
      margin-bottom: 1rem;
   }

   .content__warn {
      padding: var(--gap);
      background-color: var(--warn);
      border-radius: var(--radius);
      color: var(--warn-fr);
   }
   .content__warn_message {
      margin: 0;
   }

   @media (max-width: 767px) {
      .post-content {
         width: 90vw;
      }
      .post-tag-links {
         justify-content: flex-start;
      }
      .fm-post__cover_image {
         height: 200px;
      }
   }
</style>

<main class="page-content-y-padding">
   <div class="post-content">
      <h1 class="post-title"><%= postTitle %></h1>
      <p class="post-meta">
         <a href="<%= postTopicUrl %>" class="post-topic"><%= postTopic %></a>&nbsp;â€¢&nbsp;<small><%= postPublishTime %></small>
      </p>
      <div class="fm-post__cover_image">
         <% if (postCoverImageRefName.length && postCoverImageRefUrl.length) { %>
            <a 
               href="<%= postCoverImageRefUrl %>" 
               target="_blank" 
               class="fm-post__cover_image_ref">
               <small><%= postCoverImageRefName %></small>
            </a>
         <% } %>
      </div>
      <br />
      <section class="post-body">
         <%- postBody %>
      </section>
   
      <br />
   
      <div class="post-tag-links">
         <% for (const tag of postTags) { %>
            <a href="<%= `/search?q=${encodeURI(tag)}` %>" class="post-tag-link app-button small adaptive">
               <small><%= tag %></small>
            </a>
         <% } %>
      </div>
   </div>

   <% if (relatedPosts.length > 0) { %>
      <br />
      <hr />
      <br />
   
      <%- include(`partials/post-collection`, { posts: relatedPosts, showTopic: true }) %>
   <% } %>
</main>
